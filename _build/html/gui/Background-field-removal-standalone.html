
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Background Magnetic Field Removal Standalone &#8212; SEPIA 0.7 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="QSM Standalone" href="QSM-standalone.html" />
    <link rel="prev" title="Phase Unwarpping Standalone" href="Phase-unwrapping-standalone.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="QSM-standalone.html" title="QSM Standalone"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Phase-unwrapping-standalone.html" title="Phase Unwarpping Standalone"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SEPIA 0.7 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="background-magnetic-field-removal-standalone">
<h1>Background Magnetic Field Removal Standalone<a class="headerlink" href="#background-magnetic-field-removal-standalone" title="Permalink to this headline">¶</a></h1>
<div class="section" id="why-do-we-need-to-remove-background-field">
<h2>Why do we need to remove background field?<a class="headerlink" href="#why-do-we-need-to-remove-background-field" title="Permalink to this headline">¶</a></h2>
<p>The phase we measured in a GRE acquisition is affected by not only the brain tissue but also sources like B0 inhomogeneity and air sinus. In order to compute the susceptibility sources only contributed by the brain tissue, it is important to remove all the non-local field effect. Fortunately, the characteristic of the local field is different from that of the non-local field, it is possible to separate the two fields from the unwrapped total field. This standalone application is designed to solve the field separation problem.</p>
<p><strong>Caution</strong>: It is crucial that the background field contribution is removed accurately in this stage. Otherwise, the remaining field due to background sources will be treated as part of the local field, degrading the quality of QSM result.</p>
</div>
<div class="section" id="structure-of-the-application">
<h2>Structure of the application<a class="headerlink" href="#structure-of-the-application" title="Permalink to this headline">¶</a></h2>
<p>This application consists of two panels:</p>
<ul class="simple">
<li>I/O panel, and</li>
<li>Background field removal panel.</li>
</ul>
<p>The detailed description of each panel is given below:</p>
<div class="section" id="i-o-panel">
<h3>I/O panel<a class="headerlink" href="#i-o-panel" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/background-field-removal_io.png" src="../_images/background-field-removal_io.png" />
<ul>
<li><p class="first">Data input</p>
<p>This application accepts two types of data input method:</p>
<ol class="arabic simple">
<li>Specify a directory that contains all NIfTI images. Please specify the names of your data as in the following:<ul>
<li><strong>Total field data</strong>: must contain the string ‘total-field’ in the filename, e.g. <em>total-field.nii.gz</em>;</li>
<li><strong>Header</strong>: must contain the string ‘header’ in the filename, e.g. <em>header.mat</em>;</li>
<li>(optional) <strong>Fieldmap standard deviation data</strong>: must contain the string ‘fieldmap-sd’ in the filename, e.g. <em>fieldmap-sd.nii.gz</em>;</li>
<li>(optional) <strong>Mask data</strong>: if provided, must contain string ‘mask’ in the filename, e.g. <em>mask.nii.gz</em>, or</li>
</ul>
</li>
<li>Specify the required data separately using the GUI buttons.</li>
</ol>
</li>
<li><p class="first">Data output</p>
<p>You can specify the prefix of the data output name in the editable field ‘Output basename’. By default, the Sepia output will be stored in a directory named ‘output’ under the input directory, i.e. ‘/your/input/directory/output/’ with prefix ‘sepia’. You can change the default output directory and basename to whatever you need. If the output directory does not exist, the application will create the directory.</p>
</li>
<li><p class="first">Brain mask</p>
<p>QSM related algorithms often require a mask that contains only brain tissue. If you already have the brain mask data in NIfTI format, you can select the file manually, or named it with a specific name (see Data input section) and put it in the directory with other NIfTI files.</p>
</li>
</ul>
</div>
<div class="section" id="background-field-removal-panel">
<h3>Background field removal panel<a class="headerlink" href="#background-field-removal-panel" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/background-field-removal_background-field.png" src="../_images/background-field-removal_background-field.png" />
<ul>
<li><p class="first">Method</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://doi.org/10.1002/nbm.3064">LBV</a></li>
</ol>
<blockquote>
<div><p>Laplacian boundary value approach to removal background field</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><a class="reference external" href="https://doi.org/10.1002/nbm.1670">PDF</a></li>
</ol>
<blockquote>
<div><p>Projection onto dipole field</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><a class="reference external" href="https://doi.org/10.1002/mrm.24765">RESHARP</a></li>
</ol>
<blockquote>
<div><p>Regularisation enabled SHARP</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><a class="reference external" href="https://doi.org/10.1016/j.neuroimage.2010.10.070">SHARP</a></li>
</ol>
<blockquote>
<div><p>Sophisticated harmonic artefact reduction for phase data</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><a class="reference external" href="https://doi.org/10.1016/j.neuroimage.2010.11.088">VSHARP STI suite</a></li>
</ol>
<blockquote>
<div><p>STI suite v3.0 variable-kernel SHARP</p>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><a class="reference external" href="https://doi.org/10.1016/j.neuroimage.2010.11.088">VSHARP</a></li>
<li><a class="reference external" href="https://doi.org/10.1002/nbm.3056">iHARPERELLA</a></li>
</ol>
<blockquote>
<div><p>(not optimised with SEPIA yet)</p>
</div></blockquote>
</li>
<li><p class="first">Refine local field by 4th order 3D polynomial fit</p>
<p>Enable to remove residual B1(+ &amp; -) contribution in the local field</p>
</li>
<li><p class="first">Output</p>
<p>The output of the standalone application is given below:</p>
<ul class="simple">
<li><em>local-field.nii.gz</em> (local (or tissue) field, in Hz)</li>
<li><em>mask-qsm.nii.gz</em> (brain mask where local field is reliable, might be eroded and depended on the background field removal algorithms and ‘<strong>exclude unreliable voxels</strong>’ threshold value)</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Background Magnetic Field Removal Standalone</a><ul>
<li><a class="reference internal" href="#why-do-we-need-to-remove-background-field">Why do we need to remove background field?</a></li>
<li><a class="reference internal" href="#structure-of-the-application">Structure of the application</a><ul>
<li><a class="reference internal" href="#i-o-panel">I/O panel</a></li>
<li><a class="reference internal" href="#background-field-removal-panel">Background field removal panel</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Phase-unwrapping-standalone.html"
                        title="previous chapter">Phase Unwarpping Standalone</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="QSM-standalone.html"
                        title="next chapter">QSM Standalone</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/gui/Background-field-removal-standalone.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="QSM-standalone.html" title="QSM Standalone"
             >next</a> |</li>
        <li class="right" >
          <a href="Phase-unwrapping-standalone.html" title="Phase Unwarpping Standalone"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SEPIA 0.7 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Kwok-Shing Chan.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>